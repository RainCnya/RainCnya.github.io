---
title: '[Leaf] [P1290] 欧几里德的游戏'
tags:
  - 数学/博弈
  - 难度/P0
categories:
  - 220_Library
  - 70_博弈论
  - 71_公平博弈
abbrlink: e3ad5967
date: 2026-01-04 00:00:00
---
    
# [P1290 欧几里德的游戏](https://www.luogu.com.cn/problem/P1290 "null")

## 1. 核心逻辑

- **模型抽象**: 辗转相除过程中的状态控制权博弈。
    
- **破局路径**:
    
    1. **控制点识别**: 当大数 $b$ 至少是小数 $a$ 的两倍时（$b \ge 2a$），当前玩家拥有了**选择权**。
        
    2. **选择逻辑**: 玩家可以决定是进入 $(b \pmod a, a)$ 态，还是进入 $(b \pmod a + a, a)$ 态。
        
    3. **策略不变量**: 由于这两个状态是直接相连的后继，其中必然有一个是必败态（P-position）。当前玩家只要选择进入那个 P 态，自己就立于不败之地。
        
    4. **平凡情况**: 若 $b < 2a$，别无选择，只能进入 $(b-a, a)$，胜负交替。

## 2. 代码实现

{% fold info @AcCode %}

```cpp
#include <bits/stdc++.h>
using namespace std;

// cur = 0 代表 Stan，cur = 1 代表 Ollie
int calc( int a, int b, int cur )
{
    if( a == b ) return cur;
    // 关键控制点：拥有决策权
    if( b / a >= 2 ) return cur;
    // 别无选择
    else return calc( b - a, a, cur ^ 1 );
}

void solve( )
{
    int a, b;
    cin >> a >> b;
    if( a > b ) swap( a, b );
    
    if( calc( a, b, 0 ) == 0 ) cout << "Stan wins" << '\n';
    else cout << "Ollie wins" << '\n';
}

int main( )
{
    int t;
    cin >> t;
    while( t -- ) solve( );
    return 0;
}
```

{% endfold %}

## 3. 复盘

- **复杂度**: $O(\log(\max(a, b)))$，同辗转相除。
    
- **灵感反思**: “跨步”是博弈中的高级资源。当你可以决定局面走向时，你实际上已经通过逻辑剪枝杀死了对手的所有分支。
    
- **关联母题**: [[SG 函数]]