---
title: 线段树进阶：信息合并 (The Art of Push Up)
tags:
  - 数据结构/线段树
  - 策略/分治
categories:
  - 210_Atlas
  - 10_数据结构
  - 11_树形结构
abbrlink: ec824ae8
date: 2025-12-17 00:30:00
updated: 2025-12-23 22:35:52
---
# 线段树：信息合并 (The Art of Push Up)
## 1. 生态位

- **定义**: 探讨线段树在处理 **"非简单可加性信息"** 时的合并逻辑支点。
    
- **核心矛盾**: 左右子区间不仅有独立贡献，还存在 **跨界 (Cross-Boundary)** 交互。
    
- **解决痛点**: 最大子段和、区间连通性等无法通过简单 `sum = L + R` 得到的信息。
    

## 2. 逻辑支点

- GSS 模型 (数值跨界):
    
    在最大子段和问题中，最优解可能源于：左子树内部、右子树内部、或 跨越中点的缝合（左子树最大后缀 + 右子树最大前缀）。
    
- 接口缝合 (拓扑跨界):
    
    在动态连通性问题中，节点需存储边界的端口映射情况。PushUp 时将左区间的右侧端口与右区间的左侧端口通过 DSU 逻辑缝合，根据连通性状态更新全局统计量。
    

## 3. 实战部署

{% fold info @Code: GSS PushUp Logic %}

```cpp
struct Node
{
    int sum, lmax, rmax, dat;
};

Node merge( Node L, Node R )
{
    Node res;
    res.sum = L.sum + R.sum;
    // 前缀可能延伸至右区间
    res.lmax = max( L.lmax, L.sum + R.lmax );
    // 后缀可能延伸至左区间
    res.rmax = max( R.rmax, R.sum + L.rmax );
    // 最大子段和的三种路径：左、右、跨越中点
    res.dat = max( { L.dat, R.dat, L.rmax + R.lmax } );
    return res;
}
```

{% endfold %}

## 4. 知识粘附

- **变体扩展**:
    
    - **区间最长连续 0/1**: 与 GSS 逻辑一致，维护 `l_len`, `r_len`, `max_len`。
        
    - **动态连通性线段树**: 将 DSU 存入线段树节点，维护边界连通分量标号。
        
- **母题索引**:
    
    - [P4513 小白逛公园 (SegTree_GSS)](P4513%20小白逛公园%20(SegTree_GSS).md) : 小白逛公园 (GSS 标准应用)。
        
    - [Luogu P2513] 动态连通性。
