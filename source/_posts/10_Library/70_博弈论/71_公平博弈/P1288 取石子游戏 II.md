---
title: '[Leaf] [P1288] 取石子游戏 II'
tags:
  - 博弈论/逻辑推演
  - 难度/P1/基础
categories:
  - 10_Library
  - 70_博弈论
  - 71_公平博弈
abbrlink: f17979b5
date: 2026-01-04
---
    
# [P1288 取石子游戏 II](https://www.luogu.com.cn/problem/P1288 "null")

## 1. 核心逻辑

- **模型抽象**: 环形路径博弈。每步消耗边权并移动。
    
- **破局路径**:
    
    1. **识别控制权**: 由于可以一次消耗掉所有边权，谁先到达一条权值为 $0$ 的边前，谁就拥有了“将对手锁死”的能力。
        
    2. **不变量提取**: 胜负仅取决于起点到第一个边权为 $0$ 的边的**距离**。
        
    3. **策略分析**:
        
        - 顺时针方向：如果到第一个 $0$ 边的距离为奇数，先手必胜（直接清空最后一条边，让对手无路可走）。
            
        - 逆时针方向：同理。
            
    4. **结论**: 顺时针或逆时针任一路径满足“奇数步到达死胡同”，先手即胜。

## 2. 代码实现

{% fold info @AcCode %}

```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;

const int maxn = 2e5 + 5;

int a[maxn];
int n;

void solve( )
{
    cin >> n;
    for( int i = 1; i <= n; ++ i )
    {
        cin >> a[i];
    }

    int l = INT_MAX, r = -1;
    for( int i = 1; i <= n; ++ i )
    {
        if( a[i] != 0 ) continue;
        l = min( l, i );
        r = max( r, i );
    }

    l = l - 1;
    r = n - r;

    // cout << l << " " << r << '\n';

    if( l & 1 || r & 1 ) cout << "YES" << '\n';
    else cout << "NO" << '\n';
}

int main( )
{
    int _t = 1;
    //cin >> _t;
    while( _t -- )
    {
        solve( );
    }
    return 0;
}

```

{% endfold %}

## 3. 复盘

- **复杂度**: $O(N)$。
    
- **灵感反思**: 该题杀掉了“博弈必须算异或”的刻板映像。

- 其本质是博弈路径的长度控制。只要有一条路能把对手送进必败态（这里是死路），就是必胜。
    
- **关联母题**: [[公平博弈]]