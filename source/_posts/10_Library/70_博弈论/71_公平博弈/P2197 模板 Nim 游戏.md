---
title: '[Leaf] [P2197] [模板] Nim 游戏'
tags:
  - 博弈论/Nim
  - 难度/P1/普及
categories:
  - 10_Library
  - 70_博弈论
  - 71_公平博弈
abbrlink: 1f6d78bf
date: 2026-01-04
---
    
# [P2197 [模板] Nim 游戏](https://www.luogu.com.cn/problem/P2197 "null")

## ## 1. 核心逻辑

- **模型抽象**: 若干堆石子，单次取走一堆中任意个，取完者胜。
    
- **破局路径**: 判定所有堆数量的异或和（Nim-Sum）。异或和不为零则先手必胜。

## 2. 代码实现


{% fold info @AcCode #trd %}

```cpp
#include <bits/stdc++.h>
using namespace std;

void solve( )
{
    int n;
    if( ! ( cin >> n ) ) return;
    
    int xor_sum = 0;
    for( int i = 1; i <= n; ++ i )
    {
        int a;
        cin >> a;
        xor_sum ^= a;
    }
    
    if( xor_sum == 0 ) cout << "No" << '\n';
    else cout << "Yes" << '\n';
}

int main( )
{
    ios::sync_with_stdio( 0 );
    cin.tie( 0 );
    
    int t;
    cin >> t;
    while( t -- )
    {
        solve( );
    }
    return 0;
}
```

{% endfold %}

## 3. 复盘

- **复杂度**: $O(N)$。
    
- **关联母题**: [[SG 函数]]